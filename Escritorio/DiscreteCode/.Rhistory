read1<-function(dir, path){
data<- read.csv(paste(dir, path, sep=""), header = FALSE, stringsAsFactors=FALSE, na.strings = "NaN", sep = ",")
data<-matrix(unlist(data), ncol = ncol(data))
data[is.nan(data)]<-NA
return(data)
}
write1<-function(path, method, data){
write(t(data), path, ncolumns = ncol(data), sep = ",")
}
EMBoot<-function(dir, path, m, part, data, k){
suppressPackageStartupMessages(library(Amelia))
set.seed(k)
class<-data[,length(data[1,])]
data<-data[,-length(data[1,])]
malas<-c()
values<-c()
for(i in 1:length(data[1,])){
if(2 > length(levels(factor(data[,i]))))
malas[length(malas)+1]<-i
values[length(values)]<-levels(factor(data[,i]))[1]
}
print(malas)
if(length(malas)>0)
data<-data[,-malas]
x<-length(data[,1])
data<-matrix(as.numeric(data), nrow = x)
a.out<-amelia(x = data, p2s = 0, m = 3, empri = 34)
a<-a.out$imputations$imp1
for (i in 2:m)
{
a<-a+a.out$imputations[[i]]
}
data<-a/m
for(i in malas){
if(i<2){
data <- cbind(rep(0, length(data[1,])), data)
}
else{
if(i>=length(data[1,])){
data <- cbind(data[,1:length(data[1,])], rep(0, length(data[1,])))
}
else{
data <- cbind(data[,1:i-1], rep(values[1], length(data[1,])), data[,(i):length(data[1,])])
values<-values[-1]
}
}
}
return(cbind(data, class))
}
i<-1;j<-3;k<-3;p<-4;lim<-800;dir<-"/home/unai/Escritorio/DiscreteCode/Data/"
path<-paste(i,"-",j, "-", k, "-", p, ".data", sep = "")
data<-read1(dir, path)
data1<-EMBoot(dir, path, 3, p, data[1:lim,], k)
data2<-EMBoot(dir, path, 3, p, data[(lim+1):length(data[,1]),], k)
data[(lim+1):length(data[,1]),]
data2<-data[(lim+1):length(data[,1]),]
View(data1)
View(data2)
data2[,11] <- rep(3, length(data[,1]))
data2[,11] <- rep(3, length(data[1,]))
data2[,14] <- rep(2, length(data[1,]))
data2[,18] <- rep(1, length(data[1,]))
data2<-data[(lim+1):length(data[,1]),]
levels(factor(data[,11]))
levels(factor(data2[,11]))
levels(factor(data2[,14]))
levels(factor(data2[,18]))
data2[,11] <- rep(3, length(data[1,]))
data2[,14] <- rep(2, length(data[1,]))
data2[,18] <- rep(1, length(data[1,]))
write1(paste(dir, i,"-",j, "-", k, "-", p, "-6", ".data", sep = ""), p, rbind(data1, data2))
args<-commandArgs(TRUE)
#install.packages("mice", repos="http://cran.rstudio.com/")
read1<-function(dir, path){
data<- read.csv(paste(dir, path, sep=""), header = FALSE, stringsAsFactors=FALSE, na.strings = "NaN", sep = ",")
data<-matrix(unlist(data), ncol = ncol(data))
data[is.nan(data)]<-NA
return(data)
}
write1<-function(path, method, data){
write(t(data), path, ncolumns = ncol(data), sep = ",")
}
mice1<-function(dir, path, p, data, k){
suppressPackageStartupMessages(library(mice))
set.seed(k)
class<-data[,length(data[1,])]
data<-data[,-length(data[1,])]
malas<-c()
values<-c()
for(i in 1:length(data[1,])){
if(2 > length(levels(factor(data[,i]))))
malas[length(malas)+1]<-i
values[length(values)]<-levels(factor(data[,i]))[1]
}
print(malas)
if(length(malas)>0)
data<-data[,-malas]
x<-length(data[,1])
data<-matrix(as.numeric(data), nrow = x)
tryCatch(
imp <- complete(mice(data, print = FALSE, seed = k)),
error = function(e)
{
imp <- data
}
)
data<-matrix(unlist(imp), ncol = ncol(imp))
for(i in malas){
if(i<2){
data <- cbind(rep(0, length(data[1,])), data)
}
else{
if(i>=length(data[1,])){
data <- cbind(data[,1:length(data[1,])], rep(0, length(data[1,])))
}
else{
data <- cbind(data[,1:i-1], rep(values[1], length(data[1,])), data[,(i):length(data[1,])])
values<-values[-1]
}
}
}
return(cbind(data, class))
}
i<-1;j<-3;k<-3;p<-4;lim<-800;dir<-"/home/unai/Escritorio/DiscreteCode/Data/"
path<-paste(i,"-",j, "-", k, "-", p, ".data", sep = "")
data<-read1(dir, path)
data1<-mice1(dir, path, p, data[1:lim,], k)
data2<-data[(lim+1):length(data[,1]),]
data2<-mice1(dir, path, p, data[(lim+1):length(data[,1]),], k)
data2[,11] <- rep(3, length(data[1,]))
View(data2)
data2[,14] <- rep(2, length(data[1,]))
data2[,18] <- rep(1, length(data[1,]))
View(data2)
write1(paste(dir, i,"-",j, "-", k, "-", p, "-6", ".data", sep = ""), p, rbind(data1, data2))
args<-commandArgs(TRUE)
#install.packages("mice", repos="http://cran.rstudio.com/")
read1<-function(dir, path){
data<- read.csv(paste(dir, path, sep=""), header = FALSE, stringsAsFactors=FALSE, na.strings = "NaN", sep = ",")
data<-matrix(unlist(data), ncol = ncol(data))
data[is.nan(data)]<-NA
return(data)
}
write1<-function(path, method, data){
write(t(data), path, ncolumns = ncol(data), sep = ",")
}
EMBoot<-function(dir, path, m, part, data, k){
suppressPackageStartupMessages(library(Amelia))
set.seed(k)
class<-data[,length(data[1,])]
data<-data[,-length(data[1,])]
malas<-c()
values<-c()
for(i in 1:length(data[1,])){
if(2 > length(levels(factor(data[,i]))))
malas[length(malas)+1]<-i
values[length(values)]<-levels(factor(data[,i]))[1]
}
print(malas)
if(length(malas)>0)
data<-data[,-malas]
x<-length(data[,1])
data<-matrix(as.numeric(data), nrow = x)
a.out<-amelia(x = data, p2s = 0, m = 3, empri = 34)
a<-a.out$imputations$imp1
for (i in 2:m)
{
a<-a+a.out$imputations[[i]]
}
data<-a/m
for(i in malas){
if(i<2){
data <- cbind(rep(0, length(data[1,])), data)
}
else{
if(i>=length(data[1,])){
data <- cbind(data[,1:length(data[1,])], rep(0, length(data[1,])))
}
else{
data <- cbind(data[,1:i-1], rep(values[1], length(data[1,])), data[,(i):length(data[1,])])
values<-values[-1]
}
}
}
return(cbind(data, class))
}
i<-1;j<-3;k<-3;p<-4;lim<-800;dir<-"/home/unai/Escritorio/DiscreteCode/Data/"
path<-paste(i,"-",j, "-", k, "-", p, ".data", sep = "")
data<-read1(dir, path)
data1<-EMBoot(dir, path, 3, p, data[1:lim,], k)
data2<-data[(lim+1):length(data[,1]),]
data2[,11] <- rep(3, length(data[1,]))
data2[,14] <- rep(2, length(data[1,]))
data2[,18] <- rep(1, length(data[1,]))
write1(paste(dir, i,"-",j, "-", k, "-", p, "-7", ".data", sep = ""), p, rbind(data1, data2))
args<-commandArgs(TRUE)
#install.packages("mice", repos="http://cran.rstudio.com/")
read1<-function(dir, path){
data<- read.csv(paste(dir, path, sep=""), header = FALSE, stringsAsFactors=FALSE, na.strings = "NaN", sep = ",")
data<-matrix(unlist(data), ncol = ncol(data))
data[is.nan(data)]<-NA
return(data)
}
write1<-function(path, method, data){
write(t(data), path, ncolumns = ncol(data), sep = ",")
}
mice1<-function(dir, path, p, data, k){
suppressPackageStartupMessages(library(mice))
set.seed(k)
class<-data[,length(data[1,])]
data<-data[,-length(data[1,])]
malas<-c()
values<-c()
for(i in 1:length(data[1,])){
if(2 > length(levels(factor(data[,i]))))
malas[length(malas)+1]<-i
values[length(values)]<-levels(factor(data[,i]))[1]
}
print(malas)
if(length(malas)>0)
data<-data[,-malas]
x<-length(data[,1])
data<-matrix(as.numeric(data), nrow = x)
tryCatch(
imp <- complete(mice(data, print = FALSE, seed = k)),
error = function(e)
{
imp <- data
}
)
data<-matrix(unlist(imp), ncol = ncol(imp))
for(i in malas){
if(i<2){
data <- cbind(rep(0, length(data[1,])), data)
}
else{
if(i>=length(data[1,])){
data <- cbind(data[,1:length(data[1,])], rep(0, length(data[1,])))
}
else{
data <- cbind(data[,1:i-1], rep(values[1], length(data[1,])), data[,(i):length(data[1,])])
values<-values[-1]
}
}
}
return(cbind(data, class))
}
i<-1;j<-3;k<-27;p<-4;lim<-800;dir<-"/home/unai/Escritorio/DiscreteCode/Data/"
path<-paste(i,"-",j, "-", k, "-", p, ".data", sep = "")
data<-read1(dir, path)
data1<-mice1(dir, path, p, data[1:lim,], k)
data2<-data[(lim+1):length(data[,1]),]
data1<-data[1:lim,]
View(data1)
data1[,11] <- rep(3, length(data[1,]))
data1[,21] <- rep(1, length(data[1,]))
data1[,24] <- rep(1, length(data[1,]))
write1(paste(dir, i,"-",j, "-", k, "-", p, "-6", ".data", sep = ""), p, rbind(data1, data2))
args<-commandArgs(TRUE)
#install.packages("mice", repos="http://cran.rstudio.com/")
read1<-function(dir, path){
data<- read.csv(paste(dir, path, sep=""), header = FALSE, stringsAsFactors=FALSE, na.strings = "NaN", sep = ",")
data<-matrix(unlist(data), ncol = ncol(data))
data[is.nan(data)]<-NA
return(data)
}
write1<-function(path, method, data){
write(t(data), path, ncolumns = ncol(data), sep = ",")
}
EMBoot<-function(dir, path, m, part, data, k){
suppressPackageStartupMessages(library(Amelia))
set.seed(k)
class<-data[,length(data[1,])]
data<-data[,-length(data[1,])]
malas<-c()
values<-c()
for(i in 1:length(data[1,])){
if(2 > length(levels(factor(data[,i]))))
malas[length(malas)+1]<-i
values[length(values)]<-levels(factor(data[,i]))[1]
}
print(malas)
if(length(malas)>0)
data<-data[,-malas]
x<-length(data[,1])
data<-matrix(as.numeric(data), nrow = x)
a.out<-amelia(x = data, p2s = 0, m = 3, empri = 34)
a<-a.out$imputations$imp1
for (i in 2:m)
{
a<-a+a.out$imputations[[i]]
}
data<-a/m
for(i in malas){
if(i<2){
data <- cbind(rep(0, length(data[1,])), data)
}
else{
if(i>=length(data[1,])){
data <- cbind(data[,1:length(data[1,])], rep(0, length(data[1,])))
}
else{
data <- cbind(data[,1:i-1], rep(values[1], length(data[1,])), data[,(i):length(data[1,])])
values<-values[-1]
}
}
}
return(cbind(data, class))
}
i<-1;j<-3;k<-27;p<-4;lim<-800;dir<-"/home/unai/Escritorio/DiscreteCode/Data/"
path<-paste(i,"-",j, "-", k, "-", p, ".data", sep = "")
data<-read1(dir, path)
data1<-EMBoot(dir, path, 3, p, data[1:lim,], k)
data2<-data[(lim+1):length(data[,1]),]
data1<-data[1:lim,]
data1[,24] <- rep(1, length(data[1,]))
data1[,21] <- rep(1, length(data[1,]))
data1[,11] <- rep(3, length(data[1,]))
data2<-data[(lim+1):length(data[,1]),]
data2<-EMBoot(dir, path, 3, p, data[(lim+1):length(data[,1]),], k)
write1(paste(dir, i,"-",j, "-", k, "-", p, "-7", ".data", sep = ""), p, rbind(data1, data2))
i<-3;j<-0;k<-13;p<-4;lim<-800;dir<-"/home/unai/Escritorio/DiscreteCode/Data/"
args<-commandArgs(TRUE)
#install.packages("mice", repos="http://cran.rstudio.com/")
read1<-function(dir, path){
data<- read.csv(paste(dir, path, sep=""), header = FALSE, stringsAsFactors=FALSE, na.strings = "NaN", sep = ",")
data<-matrix(unlist(data), ncol = ncol(data))
data[is.nan(data)]<-NA
return(data)
}
write1<-function(path, method, data){
write(t(data), path, ncolumns = ncol(data), sep = ",")
}
mice1<-function(dir, path, p, data, k){
suppressPackageStartupMessages(library(mice))
set.seed(k)
class<-data[,length(data[1,])]
data<-data[,-length(data[1,])]
malas<-c()
values<-c()
for(i in 1:length(data[1,])){
if(2 > length(levels(factor(data[,i]))))
malas[length(malas)+1]<-i
values[length(values)]<-levels(factor(data[,i]))[1]
}
print(malas)
if(length(malas)>0)
data<-data[,-malas]
x<-length(data[,1])
data<-matrix(as.numeric(data), nrow = x)
tryCatch(
imp <- complete(mice(data, print = FALSE, seed = k)),
error = function(e)
{
imp <- data
}
)
data<-matrix(unlist(imp), ncol = ncol(imp))
for(i in malas){
if(i<2){
data <- cbind(rep(0, length(data[1,])), data)
}
else{
if(i>=length(data[1,])){
data <- cbind(data[,1:length(data[1,])], rep(0, length(data[1,])))
}
else{
data <- cbind(data[,1:i-1], rep(values[1], length(data[1,])), data[,(i):length(data[1,])])
values<-values[-1]
}
}
}
return(cbind(data, class))
}
path<-paste(i,"-",j, "-", k, "-", p, ".data", sep = "")
data<-read1(dir, path)
i<-3;j<-0;k<-13;p<-4;lim<-844;dir<-"/home/unai/Escritorio/DiscreteCode/Data/"
path<-paste(i,"-",j, "-", k, "-", p, ".data", sep = "")
data<-read1(dir, path)
data1<-data[1:lim,]
data1<-mice1(dir, path, p, data[1:lim,], k)
data2<-data[(lim+1):length(data[,1]),]
data2<-mice1(dir, path, p, data[(lim+1):length(data[,1]),], k)
View(data2)
data1[,6] <- rep(0, length(data[1,]))
data1[,6] <- rep(0, length(data1[1,]))
data1[,6] <- rep(0, length(data1[,1]))
args<-commandArgs(TRUE)
#install.packages("mice", repos="http://cran.rstudio.com/")
read1<-function(dir, path){
data<- read.csv(paste(dir, path, sep=""), header = FALSE, stringsAsFactors=FALSE, na.strings = "NaN", sep = ",")
data<-matrix(unlist(data), ncol = ncol(data))
data[is.nan(data)]<-NA
return(data)
}
write1<-function(path, method, data){
write(t(data), path, ncolumns = ncol(data), sep = ",")
}
mice1<-function(dir, path, p, data, k){
suppressPackageStartupMessages(library(mice))
set.seed(k)
class<-data[,length(data[1,])]
data<-data[,-length(data[1,])]
malas<-c()
values<-c()
for(i in 1:length(data[1,])){
if(2 > length(levels(factor(data[,i]))))
malas[length(malas)+1]<-i
values[length(values)]<-levels(factor(data[,i]))[1]
}
print(malas)
if(length(malas)>0)
data<-data[,-malas]
x<-length(data[,1])
data<-matrix(as.numeric(data), nrow = x)
tryCatch(
imp <- complete(mice(data, print = FALSE, seed = k)),
error = function(e)
{
imp <- data
}
)
data<-matrix(unlist(imp), ncol = ncol(imp))
for(i in malas){
if(i<2){
data <- cbind(rep(0, length(data[1,])), data)
}
else{
if(i>=length(data[1,])){
data <- cbind(data[,1:length(data[1,])], rep(0, length(data[1,])))
}
else{
data <- cbind(data[,1:i-1], rep(values[1], length(data[1,])), data[,(i):length(data[1,])])
values<-values[-1]
}
}
}
return(cbind(data, class))
}
i<-3;j<-0;k<-13;p<-4;lim<-844;dir<-"/home/unai/Escritorio/DiscreteCode/Data/"
path<-paste(i,"-",j, "-", k, "-", p, ".data", sep = "")
data<-read1(dir, path)
data1<-data[1:lim,]
data1<-mice1(dir, path, p, data[1:lim,], k)
data2<-data[(lim+1):length(data[,1]),]
data2[,6] <- rep(0, length(data2[,1]))
data2[,19] <- rep(0, length(data2[,1]))
data2[,26] <- rep(0, length(data2[,1]))
write1(paste(dir, i,"-",j, "-", k, "-", p, "-6", ".data", sep = ""), p, rbind(data1, data2))
args<-commandArgs(TRUE)
#install.packages("mice", repos="http://cran.rstudio.com/")
read1<-function(dir, path){
data<- read.csv(paste(dir, path, sep=""), header = FALSE, stringsAsFactors=FALSE, na.strings = "NaN", sep = ",")
data<-matrix(unlist(data), ncol = ncol(data))
data[is.nan(data)]<-NA
return(data)
}
write1<-function(path, method, data){
write(t(data), path, ncolumns = ncol(data), sep = ",")
}
EMBoot<-function(dir, path, m, part, data, k){
suppressPackageStartupMessages(library(Amelia))
set.seed(k)
class<-data[,length(data[1,])]
data<-data[,-length(data[1,])]
malas<-c()
values<-c()
for(i in 1:length(data[1,])){
if(2 > length(levels(factor(data[,i]))))
malas[length(malas)+1]<-i
values[length(values)]<-levels(factor(data[,i]))[1]
}
print(malas)
if(length(malas)>0)
data<-data[,-malas]
x<-length(data[,1])
data<-matrix(as.numeric(data), nrow = x)
a.out<-amelia(x = data, p2s = 0, m = 3, empri = 34)
a<-a.out$imputations$imp1
for (i in 2:m)
{
a<-a+a.out$imputations[[i]]
}
data<-a/m
for(i in malas){
if(i<2){
data <- cbind(rep(0, length(data[1,])), data)
}
else{
if(i>=length(data[1,])){
data <- cbind(data[,1:length(data[1,])], rep(0, length(data[1,])))
}
else{
data <- cbind(data[,1:i-1], rep(values[1], length(data[1,])), data[,(i):length(data[1,])])
values<-values[-1]
}
}
}
return(cbind(data, class))
}
i<-3;j<-0;k<-13;p<-4;lim<-844;dir<-"/home/unai/Escritorio/DiscreteCode/Data/"
path<-paste(i,"-",j, "-", k, "-", p, ".data", sep = "")
data<-read1(dir, path)
data1<-data[1:lim,]
data1<-EMBoot(dir, path, 3, p, data[1:lim,], k)
data2<-data[(lim+1):length(data[,1]),]
data2<-EMBoot(dir, path, 3, p, data[(lim+1):length(data[,1]),], k)
View(data2)
data2[,6] <- rep(0, length(data2[,1]))
data2[,19] <- rep(0, length(data2[,1]))
data2[,26] <- rep(0, length(data2[,1]))
write1(paste(dir, i,"-",j, "-", k, "-", p, "-7", ".data", sep = ""), p, rbind(data1, data2))
